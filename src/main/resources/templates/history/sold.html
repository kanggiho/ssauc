<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout.html">
<head>
    <meta charset="UTF-8">
    <title>íŒë§¤ ë‚´ì—­ ìƒì„¸</title>
    <!-- í•„ìš”í•œ CSS, JS, CDN ë“± -->
    <link rel="stylesheet" href="/css/mypage.css">
    <style>
        .col-md-10 {
            padding-left: 80px;
            padding-top: 24px;
        }
        /* ìºëŸ¬ì…€ ì „ì²´ ì˜ì—­ ë° ê° ìŠ¬ë¼ì´ë“œì˜ ê³ ì • ë†’ì´ ì„¤ì • */
        .carousel-inner,
        .carousel-item {
            height: 400px;
            width: 400px;
        }
        /* ìºëŸ¬ì…€ ìŠ¬ë¼ì´ë“œ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
    </style>
</head>
<body>
<div class="container" layout:fragment="content">
    <div class="row">
        <!-- ì™¼ìª½ Sidebar (mypage ê·¸ëŒ€ë¡œ) -->
        <div class="sidebar" th:replace="~{mypage/mypage :: sidebar}"></div>
        <!-- ì˜¤ë¥¸ìª½ ë©”ì¸ ì»¨í…ì¸  -->
        <div class="col-md-10">
            <h2 class="mb-4">íŒë§¤ ë‚´ì—­ ìƒì„¸</h2>

            <!-- Section 1: ì§ê±°ë˜ ë° ë°°ì†¡ ì¥ì†Œ (Product Info) -->
            <div class="card mb-4">
                <div class="card-header fw-bold">íŒë§¤ ìƒí’ˆ ì •ë³´</div>
                <div class="card-body">
                    <div class="row">
                        <!-- ì™¼ìª½: ìƒí’ˆ ì •ë³´ -->
                        <div class="col-md-7">
                            <p><strong>ìƒí’ˆ ì´ë¦„:</strong> <span th:text="${soldDetail.productName}">ìƒí’ˆ A</span></p>
                            <p><strong>ê²½ë§¤ ì‹œì‘ê°€:</strong> <span th:text="${soldDetail.startPrice}">10000</span></p>
                            <p><strong>ë“±ë¡ ì‹œê°„:</strong> <span
                                    th:text="${#temporals.format(soldDetail.createdAt, 'yyyy-MM-dd HH:mm:ss')}">2025-02-05 14:30:00</span>
                            </p>
                            <p><strong>ê±°ë˜ ë°©ì‹:</strong> <span
                                    th:text="${soldDetail.dealType == 0 ? 'ğŸ§‘ğŸ» ì§ê±°ë˜' : (soldDetail.dealType == 1 ? 'ğŸšš íƒë°°ê±°ë˜' : 'ğŸ§‘ğŸ»ğŸšš ì§ê±°ë˜, íƒë°°ê±°ë˜')}">ê±°ë˜ ë°©ì‹</span>
                            </p>
                            <hr/>
                            <p><strong>êµ¬ë§¤ì:</strong> <span th:text="${soldDetail.buyerName}">êµ¬ë§¤ì123</span></p>
                            <p><strong>íŒë§¤ê°€:</strong> <span th:text="${soldDetail.totalPrice}">50,000 ì›</span></p>
                            <p><strong>íŒë§¤ ì‹œê°„:</strong> <span
                                    th:text="${#temporals.format(soldDetail.orderDate, 'yyyy-MM-dd HH:mm:ss')}">2025-02-06 16:45:00</span>
                            </p>
                            <p><strong>ê±°ë˜ ì™„ë£Œ ì‹œê°„:</strong> <span
                                    th:text="${#temporals.format(soldDetail.completedDate, 'yyyy-MM-dd HH:mm:ss')}">2025-02-06 17:00:00</span>
                            </p>
                        </div>
                        <!-- ì˜¤ë¥¸ìª½: ìƒí’ˆ ì´ë¯¸ì§€ Carousel -->
                        <div class="col-md-5">
                            <div id="carouselSold" class="carousel slide" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    <div th:each="image, iterStat : ${carouselImages}"
                                         class="carousel-item"
                                         th:classappend="${iterStat.index == 0} ? ' active' : ''">
                                        <img th:src="@{${image.url}}" class="d-block w-100" th:alt="${image.alt}"/>
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselSold"
                                        data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">ì´ì „</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carouselSold"
                                        data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">ë‹¤ìŒ</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: ë°°ì†¡ì§€, ìˆ˜ë ¹ì¸ ì •ë³´ ë° ìš´ì†¡ì¥ ë“±ë¡ -->
            <div class="card mb-4">
                <div class="card-header fw-bold">ë°°ì†¡ ìš”ì²­ ì •ë³´</div>
                <div class="card-body">
                    <p><strong>ìˆ˜ë ¹ì¸ ì´ë¦„:</strong> <span th:text="${soldDetail.recipientName}">í™ê¸¸ë™</span></p>
                    <p><strong>ìˆ˜ë ¹ì¸ ì—°ë½ì²˜:</strong> <span th:text="${soldDetail.recipientPhone}">010-1234-5678</span></p>
                    <p><strong>ìš°í¸ë²ˆí˜¸:</strong> <span th:text="${soldDetail.postalCode}">12345</span></p>
                    <p><strong>ë°°ì†¡ ì£¼ì†Œ:</strong> <span th:text="${soldDetail.deliveryAddress}">ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123</span>
                    </p>
                    <!-- ìš´ì†¡ì¥ ë“±ë¡ ì˜ì—­ -->
                    <div class="tracking mt-3">
                        <span class="tracking-label">ìš´ì†¡ì¥ ë“±ë¡ í˜„í™©:</span>
                        <button class="btn btn-primary btn-sm" onclick="registerTracking()">ìš´ì†¡ì¥ ë“±ë¡</button>
                        <p class="tracking-number" style="display: none;">
                            <strong>ë“±ë¡ëœ ìš´ì†¡ì¥ ë²ˆí˜¸:</strong> <span id="trackingNo"></span>
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script layout:fragment="script">
    function registerTracking() {
        const trackingNo = prompt("ìš´ì†¡ì¥ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
        if (trackingNo && trackingNo.trim() !== "") {
            const trackingNumberElement = document.getElementById("trackingNo");
            trackingNumberElement.textContent = trackingNo.trim();
            trackingNumberElement.parentElement.style.display = "block";
        }
    }
</script>
</body>
</html>
