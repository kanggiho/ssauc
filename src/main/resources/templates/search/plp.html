<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout.html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 목록 - SSAUC</title>
    <link rel="stylesheet" th:href="@{/css/plp.css}">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script th:src="@{/js/plp.js}" defer></script>
</head>
<body>
<div class="container" layout:fragment="content">

    <!-- 검색 및 필터 -->
    <div class="search-bar-wrapper">
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="검색어를 입력하세요." th:value="${keyword}">
            <button id="searchIcon"><i class="fas fa-search"></i></button>
        </div>
        <div id="searchAlert" class="alert alert-warning mt-2" style="display: none;">검색어를 입력해주세요.</div>
        <!-- 연관 검색어 영역 (자동완성과 달리 plp 페이지에만 표시) -->
        <div id="relatedSearchContainer" class="related-search-container" style="display:none;">
            <h3>연관 검색어</h3>
            <ul id="relatedSearchList"></ul>
        </div>
    </div>

    <div class="row">
        <!-- 사이드바 필터 -->
        <aside class="col-md-3 filters">
            <h5>필터</h5>
            <!-- 경매중 상품만 보기 (판매완료 상품 제외) -->
            <div class="filter-section">
                <label>
                    <input type="checkbox" id="auctionOnlyCheckbox"> 경매 중인 상품만 보기
                </label>
            </div>

            <!-- 카테고리 다중 선택 -->
            <div class="filter-section">
                <h6>카테고리</h6>
                <ul id="filterCategory">
                    <!-- JS에서 카테고리 체크박스 생성 -->
                    <!-- 예: <li><label><input type="checkbox" value="디지털기기">디지털기기</label></li> -->
                </ul>
            </div>

            <!-- 가격 필터 -->
            <div class="filter-section">
                <h6>가격</h6>
                <div class="price-input">
                    <input type="number" id="minPriceInput" placeholder="최소가" min="0">
                    <span>~</span>
                    <input type="number" id="maxPriceInput" placeholder="최대가" min="0">
                    <button onclick="filterByInputPrice()">🔍</button>
                </div>
            </div>

            <button id="filterResetBtn" class="btn btn-secondary btn-sm mt-3">필터 초기화</button>
        </aside>

        <!-- 상품 리스트 -->
        <section class="col-md-9 product-results">
            <div class="results-header d-flex justify-content-between align-items-center mb-3">
                <span id="totalCountLabel">총 0개의 상품</span>

                <!-- 정렬 옵션 -->
                <select id="sortSelect" class="form-select form-select-sm">
                    <option value="VIEW_DESC">기본순 (조회수 많은 순)</option>
                    <option value="LIKE_DESC">좋아요 많은순</option>
                    <option value="PRICE_ASC">낮은 가격순</option>
                    <option value="PRICE_DESC">높은 가격순</option>
                    <option value="BID_DESC">입찰 많은순</option>
                    <option value="RECENT">최신 등록순</option>
                </select>
            </div>

            <!-- 한 줄 5개씩, 최대 6줄 (30개) -->
            <div id="productGrid" class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-3">
                <!-- JS에서 상품 목록 생성 -->
            </div>

            <nav id="pagination" class="mt-4">
                <!-- JS에서 페이지네이션 생성 -->
            </nav>
        </section>
    </div>
</div>
</body>
</html>
